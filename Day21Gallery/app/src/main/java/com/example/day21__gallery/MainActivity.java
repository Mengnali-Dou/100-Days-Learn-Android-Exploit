package com.example.day21__gallery;

import androidx.appcompat.app.AppCompatActivity;

import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Toast;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Gallery myGallery = (Gallery) findViewById(R.id.myGallery);
        myGallery.setAdapter(new ImageAdapter(this));
        myGallery.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                Toast.makeText(MainActivity.this, "点击了第" + (i+1) + "张图片", Toast.LENGTH_SHORT).show();
            }
        });
    }
}

class ImageAdapter extends BaseAdapter {

    private Context myContext;
    private Integer[] myImage = {
            R.mipmap.simple1, R.mipmap.simple2, R.mipmap.simple3,
            R.mipmap.simple4, R.mipmap.simple5, R.mipmap.simple6,
            R.mipmap.simple7, R.mipmap.simple8, R.mipmap.simple9
    };

    public ImageAdapter(Context c) {
        myContext = c;
    }

    @Override
    public int getCount() {
        return myImage.length;
    }

    @Override
    public Object getItem(int i) {
        return myImage[i];
    }

    @Override
    public long getItemId(int i) {
        return i;
    }

    @Override
    public View getView(int position, View view, ViewGroup viewGroup) {
        ImageView i = new ImageView(myContext);
        i.setImageResource(myImage[position]);
        i.setScaleType(ImageView.ScaleType.FIT_XY);
        i.setLayoutParams(new Gallery.LayoutParams(800, 800));
        return i;
    }
}