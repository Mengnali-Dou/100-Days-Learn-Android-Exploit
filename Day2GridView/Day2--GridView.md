# Day2--GridView

- 在 activity_main.xml 中添加 <GridView/>

	<img src="C:\Users\10047\AppData\Roaming\Typora\typora-user-images\image-20220417215046445.png" alt="image-20220417215046445" style="zoom:80%;" />

	```xml
	<?xml version="1.0" encoding="utf-8"?>
	<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
	    xmlns:app="http://schemas.android.com/apk/res-auto"
	    xmlns:tools="http://schemas.android.com/tools"
	    android:layout_width="match_parent"
	    android:layout_height="match_parent"
	    tools:context=".MainActivity"
	    android:orientation="vertical">
	
	    <TextView
	        android:layout_width="wrap_content"
	        android:layout_height="wrap_content"
	        android:layout_margin="10dp"
	        android:text="水果"/>
	
	    <!-- 显示选择水果的名字 -->
	    <TextView
	        android:id="@+id/txtChooseFruit"
	        android:layout_width="match_parent"
	        android:layout_height="wrap_content"
	        android:layout_margin="10dp"
	        android:textSize="20dp"/>
	
	    <!-- 显示水果图片和名字 -->
	    <GridView
	        android:id="@+id/myGridView"
	        android:layout_width="match_parent"
	        android:layout_height="wrap_content"
	        android:columnWidth="60dp"
	        android:numColumns="3"
	        android:stretchMode="spacingWidthUniform"/>
	</LinearLayout>
	```

	

- 在 /res/layout 中添加GridView的布局文件：gridview_item.xml

	<img src="C:\Users\10047\AppData\Roaming\Typora\typora-user-images\image-20220417215219473.png" alt="image-20220417215219473" style="zoom:80%;" />

	```xml
	<?xml version="1.0" encoding="utf-8"?>
	<!-- GridView的布局文件 -->
	<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
	    android:layout_width="match_parent"
	    android:layout_height="match_parent"
	    android:orientation="vertical">
	
	    <!-- 图片 -->
	    <ImageView
	        android:id="@+id/img"
	        android:layout_width="wrap_content"
	        android:layout_height="60dp"
	        android:layout_marginTop="5dp"
	        android:layout_gravity="center"/>
	
	    <!-- 名字 -->
	    <TextView
	        android:id="@+id/txtImageName"
	        android:layout_width="wrap_content"
	        android:layout_height="wrap_content"
	        android:layout_marginTop="2dp"
	        android:layout_gravity="center"/>
	</LinearLayout>
	```

	

- MainActivity.java

	```java
	package com.example.a014_gridview;
	
	import androidx.appcompat.app.AppCompatActivity;
	
	import android.annotation.SuppressLint;
	import android.os.Bundle;
	import android.view.View;
	import android.widget.AdapterView;
	import android.widget.GridView;
	import android.widget.SimpleAdapter;
	import android.widget.TextView;
	
	import java.util.ArrayList;
	import java.util.HashMap;
	import java.util.List;
	import java.util.Map;
	import java.util.SimpleTimeZone;
	
	public class MainActivity extends AppCompatActivity {
	
	    GridView gridView;
	    TextView txtChooseFruit;
	    List<Map<String,Object>> dataList;    // 存放GridView中要显示的
	    SimpleAdapter adapter;
	
	    @Override
	    protected void onCreate(Bundle savedInstanceState) {
	        super.onCreate(savedInstanceState);
	        setContentView(R.layout.activity_main);
	        gridView=(GridView) findViewById(R.id.myGridView);
	        txtChooseFruit=(TextView) findViewById(R.id.txtChooseFruit);
	
	        int[] fruit ={R.drawable.apple,R.drawable.avocado,R.drawable.banana,
	        R.drawable.carambola,R.drawable.cherry,R.drawable.mangosteen,
	        R.drawable.pear,R.drawable.strawberry,R.drawable.watermelon};    // 存放水果图片的ID
	        String[] fruitName ={"苹果","牛油果","香蕉",
	        "杨桃","樱桃","山竹",
	        "梨","草莓","西瓜"};    // 存放水果图片对应名字
	
	        dataList=new ArrayList<Map<String,Object>>();    // 存储显示在GridView中的数据
	
	        // 将图片和名字对应起来
	        for(int i=0;i<fruit.length;i++) {
	            Map<String,Object> map=new HashMap<String, Object>();
	            map.put("img",fruit[i]);
	            map.put("txtImageName",fruitName[i]);
	            dataList.add(map);    // 作为一个Map对象，添加到dataList中
	        }
	
	        /**
	         * 定义适配器
	         * 第二个数据使用dataList列表作为适配器的数据源
	         * 第三个参数显示数据要使用的布局文件
	         * 第四个参数：要显示哪些列的数据
	         * 第五个参数：第四个参数中每一列的数据控件的ID
	         */
	        adapter=new SimpleAdapter(this,dataList,R.layout.gridview_item,
	                new String[]{"img","txtImageName"},
	                new int[]{R.id.img,R.id.txtImageName});
	        gridView.setAdapter(adapter);    // 设置GridView的适配器为adapter
	
	        // GridView单击监听事件
	        gridView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
	            @SuppressLint("SetTextI18n")
	            @Override
	            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
	                txtChooseFruit.setText("你选择的水果是："+fruitName[i].toString());
	            }
	        });
	    }
	}
	```

	

- 效果：

	<img src="C:\Users\10047\AppData\Roaming\Typora\typora-user-images\image-20220417215429850.png" alt="image-20220417215429850" style="zoom:80%;" />

	- 点击某个图片后

		<img src="C:\Users\10047\AppData\Roaming\Typora\typora-user-images\image-20220417215508692.png" alt="image-20220417215508692" style="zoom:80%;" />

