package com.example.day3__menu;

import androidx.annotation.NonNull;
import androidx.appcompat.app.AppCompatActivity;

import android.annotation.SuppressLint;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;
import android.widget.Toast;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

public class MainActivity extends AppCompatActivity {

    TextView tv_message;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.qqmenu,menu);    // 实例化Menu目录下的Menu布局文件
        return super.onCreateOptionsMenu(menu);
    }

    // 采用反射的方式显示选项菜单的图标
    @Override
    public boolean onMenuOpened(int featureId, Menu menu) {
        if (menu != null) {
            try {
                Method method = menu.getClass().getDeclaredMethod("setOptionalIconsVisible", Boolean.TYPE);
                method.setAccessible(true);
                method.invoke(menu, true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        return super.onMenuOpened(featureId, menu);
    }

    @SuppressLint("NonConstantResourceId")
    @Override
    public boolean onOptionsItemSelected(@NonNull MenuItem item) {
        switch (item.getItemId()) {
            case R.id.m_createchat:
                Toast.makeText(this, "创建群聊", Toast.LENGTH_SHORT).show();
                break;
            case R.id.m_inventor:
                Toast.makeText(this, "扫码入群", Toast.LENGTH_SHORT).show();
                break;
            case R.id.m_scanadd:
                Toast.makeText(this, "创建群聊", Toast.LENGTH_SHORT).show();
                break;
            case R.id.m_addfriend:
                Toast.makeText(this, "加好友/群", Toast.LENGTH_SHORT).show();
                break;
            case R.id.m_party:
                Toast.makeText(this, "一起派对", Toast.LENGTH_SHORT).show();
                break;
            case R.id.m_scan:
                Toast.makeText(this, "扫一扫", Toast.LENGTH_SHORT).show();
                break;
            case R.id.m_facetoface:
                Toast.makeText(this, "面对面快传", Toast.LENGTH_SHORT).show();
                break;
            case R.id.m_pay:
                Toast.makeText(this, "收付款", Toast.LENGTH_SHORT).show();
                break;
            default:Toast.makeText(this, ".....", Toast.LENGTH_SHORT).show();
                break;
        }
        return super.onOptionsItemSelected(item);
    }

}